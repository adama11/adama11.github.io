<!DOCTYPE html>
<html lang="en">
<head>
	<title>JenTube Reader</title>
	<!-- favicons -->
	<link rel="shortcut icon" href="img/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="img/favicon.ico">
	<link rel="icon" type="image/png" sizes="196x196" href="img/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="img/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="img/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="img/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16.png">
	<link rel="apple-touch-icon" href="img/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="img/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="img/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="img/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="img/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="img/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/imgfavicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="img/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="img/favicon-180.png">
	<meta name="msapplication-TileColor" content="#FFFFFF">
	<meta name="msapplication-TileImage" content="img/favicon-144.png">
	<meta name="msapplication-config" content="img/browserconfig.xml">
	<!-- End favicons -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
	<script src="myjs.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
	<script>moment().format();</script>
	<script src="src/FileSaver.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/TableExport/4.0.11/js/tableexport.min.js"></script> <!-- https://tableexport.v4.travismclarke.com/ -->
	<script src="https://smtpjs.com/v2/smtp.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
	<link rel="stylesheet" .sticky-toptype="text/css" href="mystyle.css">
	<link href="https://use.fontawesome.com/releases/v5.0.2/css/all.css" rel="stylesheet"> <!--for the icons-->
	<style>
</style>	
</head>
<body>
	<!-- Navbar  -->
	<nav class="navbar sticky-top navbar-expand-md navbar-dark">
		<a class="navbar-brand" href="index.html">
			<img src="img/jentube-reader-white-transparent-lg.png" width="200" height="60" alt="JenTube Reader">
		</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#myNavbar" aria-controls="myNavbar" aria-expanded="false" aria-label="Toggle navigation" style="border-width: 2px;" id="navbar-toggle">
			<i class="fas fa-chevron-down"></i>
		</button>

		<div class="collapse navbar-collapse justify-content-end" id="myNavbar">
			<ul class="navbar-nav">
				<li class="nav-item active" id="CurrentExperimentButton"> 
					<a class="nav-link"><i class="fas fa-sticky-note"></i> Current Experiment <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item" id="PastExperimentsButton">
					<a class="nav-link"><i class="fas fa-history"></i> Past Experiments <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item" id="DeviceConfigButton">
					<a class="nav-link"><i class="fas fa-wrench"></i> Device Configuration <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item" id="AlertSettingsButton">
					<a class="nav-link"><i class="fas fa-bell"></i> Alert Settings <span class="sr-only">(current)</span></a>
				</li>

			</ul>
		</div>
	</nav>
	<!-- End Navbar  -->
	<!-- Current Experiment Page  -->
	<div id="CurrentExperiment">
		<div class="d-flex justify-content-center text-center">
			<div class="container-main d-flex flex-column">
				<!-- Test Tube Box  -->
				<div class="card" style="max-width: 45rem;" >
					<h5 class="card-header text-center">
						<i class="fas fa-angle-right" id="experimentIcon"></i> Experiment: 
						<I><span id="experimentName"></span></I>
					</h5>

					<div class="card-body">
						<div class="d-flex flex-row mr-auto justify-content-around">
							<div class="testtube align-self-center" data-target="#tube1" id="tube1">
								<b>1</b>
								<div class="optical-density-box" id="tube1box">
									<br>Optical Density
									<br><h5 id="od1">N/A</h5>
									<br>
								</div>
							</div>
							<div class="testtube align-self-center" data-target="#tube2" id="tube2">
								<b>2</b>
								<div class="optical-density-box" id="tube2box">
									<br>Optical Density
									<br><h5 id="od2">N/A</h5>
									<br>
								</div>
							</div>
							<div class="testtube align-self-center" data-target="#tube3" id="tube3">
								<b>3</b>
								<div class="optical-density-box" id="tube3box">
									<br>Optical Density
									<br><h5 id="od3">N/A</h5>
									<br>
								</div>
							</div>
							<div class="testtube align-self-center" data-target="#tube4" id="tube4">
								<b>4</b>
								<div class="optical-density-box" id="tube4box">
									<br>Optical Density
									<br><h5 id="od4">N/A</h5>
									<br>
								</div>
								<!-- <span class="testtube-rotatedtext">NOT READING</span> -->
							</div>
						</div>
						<div style="padding-top: 20px;">
							<button id="QuickReadButton" class="btn btn-primary">Quick Read</button>
							<button id="ScheduledReadButton" class="btn btn-custom-disabled"> Scheduled Read</button>
						</div>
						<div class="hidden" id="scheduledReadInfo" style="padding-top: 25px;">
							<h6>
								<i class="fas fa-sync fa-spin"></i>
								<span id="scheduledReadInfoTimes"></span>
							</h6>
							<button id="StopReadButton" class="btn btn-danger">Stop Read</button>
						</div>
					</div>
					<h7 class="card-footer text-muted">
						Last run: 
						<span id="LastRun">no runs yet</span>
					</h7>
				</div>
				<!-- End Test Tube Box  -->
				<!-- Live Graph Box  -->
				<div class="card" style="max-width: 45rem; margin-top: 20px;">
					<h5 class="card-header text-center">
						<a data-toggle="collapse" href="#collapseGraph" role="button" aria-expanded="true" aria-controls="collapseGraph" data-toggle="tooltip" id="liveGraphToggle">
							<i class="fas fa-chart-line" id="experimentIcon"></i> Live Graph
						</a>
					</h5>
					<div id="collapseGraph" class="collapse" role="tabpanel" aria-labelledby="headingOne">
						<div class="card-body">
							<canvas id="liveChart" width="400" height="200"></canvas>
							<button id="ClearLiveGraphButton" class="btn btn-danger" style="margin-top:15px; margin-bottom: 0px;">Clear Graph</button>
						</div>
					</div>
				</div>
				<!-- End Live Graph Box  -->
				<!-- Confirm Clear Live Graph Modal  -->
				<div class="modal fade text-left" id="confirmClearLiveGraphModal" tabindex="-1" role="dialog" aria-labelledby="confirmClearLiveGraphModal" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Clear Live Graph</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								Are you sure you want to clear the current live graph?
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								<button type="button" class="btn btn-danger" id="confirmClearLiveGraphModalButton" data-dismiss="modal">Clear Graph</button>
							</div>
						</div>
					</div>
				</div>
				<!-- End Confirm Clear Live Graph Modal  -->
				<!-- Experiment Settings Box  -->
				<div class="card d-flex justify-content-center text-center" style="max-width: 45rem; margin-top: 20px">
					<h5 class="card-header text-center">
						<span id="expTitle"><i class="fas fa-cog"></i> Experiment Settings</span>
					</h5>

					<div class="card-body" id="ExperimentSettingsCard">
						<!-- Experiment Name Input -->
						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text" id="basic-addon1">Experiment Name</span>
							</div>
							<input type="text" class="form-control" placeholder="e.g. Run #1" aria-label="Run #1" aria-describedby="basic-addon1" id="experimentNameInput">
							
						</div>
						<!-- End Experiment Name Input -->
						<!-- Enable Tubes Toggles -->
						<table width="100%">
							<tr>
								<td class="toggle-box-left" width="33%" height="100%">Tubes to Read</td>
								<td class="toggle-box-right" width="66%" height="100%">
									<div class="form-check form-check-inline">
										<input class="form-check-input" type="checkbox" id="inlineCheckboxTube1" value="option1">
										<label class="form-check-label" for="inlineCheckboxTube1">Tube 1</label>
									</div>
									<div class="form-check form-check-inline">
										<input class="form-check-input" type="checkbox" id="inlineCheckboxTube2" value="option2">
										<label class="form-check-label" for="inlineCheckboxTube2">Tube 2</label>
									</div>
									<div class="form-check form-check-inline">
										<input class="form-check-input" type="checkbox" id="inlineCheckboxTube3" value="option3">
										<label class="form-check-label" for="inlineCheckboxTube3">Tube 3</label>
									</div>
									<div class="form-check form-check-inline">
										<input class="form-check-input" type="checkbox" id="inlineCheckboxTube4" value="option4">
										<label class="form-check-label" for="inlineCheckboxTube4">Tube 4</label>
									</div>
								</td>
							</tr>
						</table>
						<!-- End Enable Tubes Toggles -->
						<!-- Scheduled Reads Input -->				
						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text" id="basic-addon3">Read once every</span>
							</div>
							<input type="number" class="form-control text-center" id="scheduledReadInput1" aria-describedby="basic-addon3" placeholder="e.g. 12">
							<div class="input-group-prepend">
								<span class="input-group-text" id="basic-addon3" style="border-left: 0;">minutes for</span>
							</div>
							<input type="number" class="form-control text-center" id="scheduledReadInput2" aria-describedby="basic-addon3" placeholder="e.g. 15">
							<div class="input-group-append">
								<span class="input-group-text" id="basic-addon3" style="border-left: 0;">minutes.</span>
							</div>
						</div>
						<!-- End Scheduled Reads Input -->	
						<!-- Schedule Error Modal  -->
						<div class="modal fade text-left" id="scheduleErrorModal" tabindex="-1" role="dialog" aria-labelledby="scheduleErrorModalLabel" aria-hidden="true">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="scheduleErrorModal">Error</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										Please input proper time settings to start a Scheduled Read.
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
									</div>
								</div>
							</div>
						</div>
						<!-- End Schedule Error Modal  -->
						<!-- Confirm Cancel Modal  -->
						<div class="modal fade text-left" id="confirmCancelModal" tabindex="-1" role="dialog" aria-labelledby="confirmCancelModalLabel" aria-hidden="true">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title">Stop Scheduled Read</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										Are you sure you want to stop the current running Scheduled Read?
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
										<button type="button" class="btn btn-danger" id="confirmCancelModalButton" data-dismiss="modal">Stop Read</button>
									</div>
								</div>
							</div>
						</div>
						<!-- End Confirm Cancel Modal  -->
						<button id="ApplySettingsButton" class="btn btn-primary">Apply Settings</button>
						<div class="alert alert-success hidden" role="alert" id="ExperimentSettingsSaveAlert" style="padding: 4px; margin-top: 5px; font-size: .90em;">
							<i class="fas fa-save"></i> Settings Applied!
						</div>
					</div>
				</div>
				<!-- End Experiment Settings Box  -->
			</div>
		</div>
	</div>
	<!-- End Current Experiment Page  -->
	<!-- Past Experiments Page  -->
	<div id="PastExperiments" class="hidden">
		<div class="container-main d-flex justify-content-center text-center">
			<!-- Table Box  -->
			<div class="card" style="height: 100%;">
				<h5 class="card-header ">
					<i class="fas fa-angle-right"></i> Experiment History<br>
					<button type="button" id="GraphButton" class="btn btn-primary" data-toggle="modal" data-target="#graphModal"><i class="fas fa-chart-line"></i> Graph Selected</button>
					<button id="ExportHistoryButton" class="btn btn-primary"><i class="fas fa-file-alt"></i> Export as CSV</button> 
					<!-- <button id="checkGraphButton" class="btn btn-primary"><i class="fas fa-file-alt"></i> Check Graph Checks</button> -->
					<button type="button" id="DeleteHistoryButton" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i>
						Delete History
					</button>
				</h5>
				<div class="card-body">
					<table class="table text-left" id="tableToExport">
						<thead class="thead-default">
							<tr>
								<th>#</th>
								<th><div style="text-align: center;" data-toggle="tooltip" id="tableGraphIcon"><i class="fas fa-chart-line"></i></div></th>
								<th>Experiment Name</th>
								<th>Start Time</th>
								<th>Tube 1</th>
								<th>Tube 2</th>
								<th>Tube 3</th>
								<th>Tube 4</th>
								<th>Type</th>
								<th>Notes</th>
							</tr>
						</thead>
						<tbody id="tableBody">
							<!-- where data gets inserted -->
						</tbody>
					</table>
					<div id="noDataInTable">No experiments yet.</div>
				</div>
			</div>
			<!-- End Table Box  -->
		</div>
		<!-- Delete Modal  -->
		<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Delete All Experiment History?</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						WARNING: THIS CANNOT BE UNDONE!<br>
						Please confirm that you want to delete all experiment history.
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
						<button type="button" id="DeleteHistoryConfirmButton" class="btn btn-danger" data-dismiss="modal">Delete Data</button>
					</div>
				</div>
			</div>
		</div>
		<!-- End Delete Modal  -->
		<!-- Graph Modal  -->
		<div class="modal fade" id="graphModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Graph</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<!-- <div style="height: 400px; width: 800px;">
							<div class="ct-chart ct-major-third"></div>
						</div> -->
						<canvas id="myChart" width="400" height="300"></canvas>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<!-- End Graph Modal  -->
	</div>
	<!-- End Past Experiments Page  -->
	<div id="DeviceConfig" class="hidden">
		<div class="container-main d-flex justify-content-center text-center">
			<div class="card" style="max-width: 50rem;">
				<h5 class="card-header text-center">
					<span id="expTitle"><i class="fas fa-angle-right"></i> Device Settings</span>
				</h5>

				<div class="card-body" id="DeviceSettingsCard">
					<p class="card-text">Set up your Arduino now!</p>		
					
					<div class="alert alert-success hidden" role="alert" id="DeviceSettingsSaveAlert" style="padding: 4px; margin-top: 5px; font-size: .90em;">
						<i class="fas fa-save"></i> Settings Applied!
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="AlertSettings" class="hidden">
		<div class="container-main d-flex justify-content-center text-center">
			<div class="card" style="max-width: 50rem;">
				<h5 class="card-header text-center">
					<span id="expTitle"><i class="fas fa-angle-right"></i> Alert Settings</span>
				</h5>

				<div class="card-body" id="ExperimentSettingsCard">
					<p class="card-text">You will recieve a notification when the selected tubes approach and reach the specified OD.</p>		
					<div class="text-left">
						<div class="form-group row">
							<label for="targetOD" class="col-sm-3 col-form-label">Target OD</label>
							<div class="col-sm-9">
								<input type="text" class="form-control" id="targetOD" placeholder="0.62">
							</div>
						</div>
						<div class="form-group row">
							<label for="alertEmailInput" class="col-sm-3 col-form-label">Email</label>
							<div class="col-sm-9">
								<input type="email" class="form-control" id="alertEmailInput" placeholder="Email">
							</div>
						</div>
						<div class="form-group row">
							<label for="alertPhoneInput" class="col-sm-3 col-form-label">Phone Number</label>
							<div class="col-sm-9">
								<input type="phone" class="form-control" id="alertPhoneInput" placeholder="No hyphens please (e.g. 2175551234)">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-sm-3" for="cellProviderSelect">Cell Phone Provider</label>
							<select class="custom-select col-sm-3" id="cellProviderSelect" style="margin-left: 14px; margin-right: 14px;">
								<option selected>Choose...</option>
								<option value="alltel">Alltel</option>
								<option value="att">AT&amp;T</option>
								<option value="boost">Boost Mobile</option>
								<option value="cricket">Cricket Wireless</option>
								<option value="sprint">Sprint</option>
								<option value="tmobile">T-Mobile</option>
								<option value="verizon">Verizon</option>
								<option value="virgin">Virgin Mobile USA</option>
							</select>
						</div>
						<div class="form-group row">
							<legend class="col-form-label col-sm-3 pt-0">Tubes to Enable</legend>
							<div class="col-sm-3">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="alertCheckTube1">
									<label class="form-check-label" for="alertCheckTube1">
										Tube 1
									</label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="alertCheckTube2">
									<label class="form-check-label" for="alertCheckTube2">
										Tube 2
									</label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="alertCheckTube3">
									<label class="form-check-label" for="alertCheckTube3">
										Tube 3
									</label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="alertCheckTube4">
									<label class="form-check-label" for="alertCheckTube4">
										Tube 4
									</label>
								</div>
							</div>
							<div class="col-sm-3">Type of Alert</div>
							<div class="col-sm-3">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="alertCheckEmail">
									<label class="form-check-label" for="alertCheckEmail">
										Email
									</label>
								</div>
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="alertCheckPhone">
									<label class="form-check-label" for="alertCheckPhone">
										Text Message
									</label>
								</div>
							</div>

						</div>
						<div class="form-group row">
							<div class="col-sm-10">
								<button class="btn btn-primary" id="AlertSettingsSaveButton">Apply Settings</button>
								<button class="btn btn-danger" id="SendEmailButton"><i class="fas fa-envelope"></i> Test Email</button>
								<button class="btn btn-danger" id="SendTextButton"><i class="fas fa-envelope"></i> Test Text</button>
							</div>
						</div>
					</div>
					<div class="alert alert-success hidden" role="alert" id="AlertSettingsSaveAlert" style="padding: 4px; margin-top: 5px; font-size: .90em;">
						<i class="fas fa-save"></i> Settings Applied!
					</div>


				</div>
			</div>
		</div>
		<!-- Invalid Phone Provider Modal  -->
		<div class="modal fade" id="invalidAlertSettingsModal" tabindex="-1" role="dialog" aria-labelledby="invalidAlertSettingsModal" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Invalid Alert Settings</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						Invalid settings configuration. Please Review.
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<!-- End Invalid Phone Provider Modal  -->
	</div>


</body>
</html>